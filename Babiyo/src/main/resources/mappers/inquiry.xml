<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
 "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.mealmaker.babiyo.inquiry">

<resultMap type="inquiryDto" id="inquiryResultMap">
<id column="NO" property="no"/>
<result column="MEMBER_ID" property="memberId"/>
<result column="CATEGORY_CODE" property="categoryCode"/>
<result column="TITLE" property="title"/>
<result column="CONTENT" property="content"/>
<result column="ANSWER" property="answer"/>
<result column="CREATE_DATE" property="createDate"/>
<result column="CODE" property="code"/>
<result column="NAME" property="name"/>
</resultMap>

<!-- 문의 리스트 -->
<select id="inquirytList" resultMap="inquiryResultMap">
	SELECT  I.NO, C.NAME, I.TITLE, I.ANSWER, I.CREATE_DATE
	FROM INQUIRY I INNER JOIN INQUIRY_CATEGORY C
	ON C.CODE = I.CATEGORY_CODE
	ORDER BY I.NO DESC
</select>

<!-- 문의 상세 -->
<select id="inquirySelectOne" parameterType="int"
	resultMap="inquiryResultMap">
	SELECT  I.MEMBER_ID, C.NAME, I.TITLE, I.CONTENT,I.ANSWER, I.CREATE_DATE, I.NO, I.CATEGORY_CODE
	FROM INQUIRY I INNER JOIN INQUIRY_CATEGORY C
	ON C.CODE = I.CATEGORY_CODE
	WHERE NO = #{no}
</select>

<!-- 문의 작성 -->
<insert id="inquiryWrite" parameterType="inquiryDto">
	INSERT INTO INQUIRY
	VALUE(MEMBER_ID, CATEGORY_CODE, TITLE, CONTENT, CREATE_DATE)
	VALUES(#{memberId} ,#{categoryCode} , #{title}, #{content}, SYSDATE)	
</insert>

<!-- 문의 수정 -->
<update id="inquiryUpdateOne" parameterType="inquiryDto">
	UPDATE INQUIRY
	SET 
	CATEGORY_CODE = #{categoryCode},
	TITLE = #{title},
	CONTENT = #{content}
	WHERE NO = #{no}
</update>

<!-- 문의 삭제 -->
<delete id="inquiryDeleteOne" parameterType="int">
	DELETE FROM INQUIRY
	WHERE NO = ${value}
</delete>

</mapper>